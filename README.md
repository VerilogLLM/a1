Base LLM with reasoning capability for vertical LLMs

Post training pipeline

How to run)

Dataset

Total row = n (number of row per each dataset) * (dataset list)

Mode
-mode 0,1,2
0. general (default): Set your system prompt at prompt.py. REASONING_STRUCTURE_PROMPT
1. verification and solution hint: Solve and verify with teacher model. Use solution hint if solution and attempt mismatch
2. rerun after critique review: If still solution and attemp mismatch, rerun with critique review. Must input csv file that have critique column generated by cluster_results.py

Mode 0 example

n=100 rows per each dataset, -p parallel processing, -m model, -l error logger, -mode

100 rows per each dataset, parallel processing. use gemini. mode is attempt only. No verification.
% python data/collect_math.py -l error.log -n 100 -p -m gemini | tee collect.tee.log

10 rows per each dataset, serial processing
% python data/collect_math.py -l error.log -n 10 -m gemini | tee collect.tee.log

Mode 1 example

100 rows per each dataset, parallel processing. use gemini. mode is solve + verify
% python data/collect_math.py -l error.log -n 100 -p -m gemini -mode 1 | tee collect.tee.log

Mode 2 example

Mode 2 step 1
Cluster (generate critique) 
% python data/cluster_results.py output/train_ds_math_update.csv

Mode 2 step 2
Must input dataset csv
mode is rerun with critique
% python data/collect_math.py -l error.log -p -m gemini -mode 2 -csv output/solution_non_matching_rows.csv | tee collect.rerun.tee.log
